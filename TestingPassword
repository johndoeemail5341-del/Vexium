<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <base target="_top">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <style>
    /* No scroll / centered card */
    html, body { height: 100%; margin: 0; overflow: hidden; }
    body {
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
      background: #f3f4f6; /* neutral light gray (no green) */
      display: grid; place-items: center;
      -webkit-font-smoothing: antialiased;
      color: #111827;
    }

    /* Card like the screenshot */
    .card {
      width: 92%; max-width: 360px;
      background: #ffffff;
      border-radius: 10px;
      border: 1px solid #e5e7eb;
      box-shadow: 0 10px 30px rgba(0,0,0,.07);
      padding: 22px 20px;
      text-align: center;
    }
    .title {
      margin: 0 0 14px 0;
      font-size: 1.1rem;
      font-weight: 700;
    }

    /* Input group */
    .group { margin: 12px 0 10px; }
    .input {
      width: 100%;
      height: 42px;
      border: 1px solid #e5e7eb;
      border-radius: 6px;
      padding: 0 12px;
      font-size: .98rem;
      background: #f9fafb;
      outline: none;
      transition: border-color .12s ease, background .12s ease;
    }
    .input:focus { border-color: #cbd5e1; background: #fff; }

    /* Button styled like the screenshot but neutral (no green) */
    .btn {
      width: 100%;
      height: 42px;
      border: 1px solid #e5e7eb;
      border-radius: 6px;
      background: #111827;   /* solid dark neutral */
      color: #fff;
      font-weight: 700;
      letter-spacing: .3px;
      cursor: pointer;
      transition: transform .06s ease, opacity .12s ease;
    }
    .btn:hover { opacity: .96; }
    .btn:active { transform: translateY(1px); }
    .btn:disabled { opacity: .6; cursor: not-allowed; }

    /* Status line */
    .status {
      margin-top: 10px;
      font-size: .92rem;
      color: #6b7280;          /* default muted */
      min-height: 1.2em;       /* keep height stable */
    }
    .status.ok  { color: #166534; }   /* green text for success only */
    .status.bad { color: #b91c1c; }   /* red text for wrong pw */
    .status.chk { color: #374151; }   /* darker while checking */
  </style>
</head>
<body>
  <div class="card" role="group" aria-labelledby="t">
    <h3 id="t" class="title">Protected Page</h3>

    <div class="group">
      <input id="pw" class="input" type="password" placeholder="passphrase" autocomplete="current-password">
    </div>

    <button id="go" class="btn" type="button">DECRYPT</button>

    <div id="status" class="status" aria-live="polite">This console is password protected.</div>
  </div>

  <script>
    const $ = (id) => document.getElementById(id);
    const pw = $("pw");
    const go = $("go");
    const statusEl = $("status");

    function setStatus(kind, text) {
      statusEl.className = "status " + (kind || "");
      statusEl.textContent = text;
    }
    function setBusy(b) {
      go.disabled = b; pw.disabled = b;
      if (b && document.activeElement) { document.activeElement.blur(); }
    }

    function submit() {
      const value = (pw.value || "").trim();
      if (!value) { setStatus("bad", "Please enter a passphrase."); return; }
      setStatus("chk", "checking…");
      setBusy(true);

      google.script.run
        .withSuccessHandler(function(ok){
          if (ok) setStatus("ok", "correct");
          else    setStatus("bad", "incorrect password");
          setBusy(false);
        })
        .withFailureHandler(function(){
          setStatus("", "checking failed — try again");
          setBusy(false);
        })
        .checkPassword(value);
    }

    go.addEventListener("click", submit);
    pw.addEventListener("keydown", (e)=>{ if (e.key === "Enter") submit(); });

    // autofocus
    setTimeout(()=> pw.focus(), 0);
  </script>
</body>
</html>
